<!DOCTYPE html>
<!-- template for lunamark web pages -->
<html>
<head>
<meta charset="utf-8">
<title></title>
<link rel="stylesheet" type="text/css" href="site.css" />
</head>
<body>
<h1>Lunamark</h1>

<p>Lunamark is a lua library and command-line program for conversion of markdown to other textual formats. Currently HTML, <a href="http://paulrouget.com/dzslides/">dzslides</a> (HTML5 slides), Docbook, ConTeXt, LaTeX, and Groff man are the supported output formats, but it is easy to add new writers or modify existing ones. The markdown parser is written using a PEG grammar and can also be modified by the user.</p>

<p>The library is as portable as lua and has very good performance. It is roughly as fast as the author’s own C library <a href="http://github.com/jgm/peg-markdown">peg-markdown</a>, two orders of magnitude faster than <code>Markdown.pl</code>, and three orders of magnitude faster than <code>markdown.lua</code>.</p>

<h1>Links</h1>

<ul>
<li><a href="https://github.com/jgm/lunamark">Source code repository</a></li>
<li><a href="https://github.com/jgm/lunamark/issues">Issue tracker</a></li>
<li><a href="http:jgm.github.com/lunamark">Website</a></li>
<li><a href="http://jgm.github.com/lunamark/doc/">API documentation</a></li>
<li><a href="http://jgm.github.com/lunamark/lunamark.1.html">lunamark(1)</a></li>
<li><a href="http://jgm.github.com/lunamark/lunadoc.1.html">lunadoc(1)</a></li>
</ul>

<h1>Extensions</h1>

<p>Lunamark’s markdown parser currently supports a number of extensions (which can be turned on or off individually), including:</p>

<ul>
<li>Smart typography (fancy quotes, dashes, ellipses)</li>
<li>Significant start numbers in ordered lists</li>
<li>Footnotes</li>
<li>Definition lists</li>
<li>Pandoc-style title blocks</li>
<li>Flexible metadata using lua declarations</li>
</ul>

<p>See the <a href="http://jgm.github.com/lunamark/lunamark.1.html">lunamark(1)</a> man page for a complete list.</p>

<p>It is very easy to extend the library by modifying the writers, adding new writers, and even modifying the markdown parser. Some simple examples are given in the <a href="http://jgm.github.com/lunamark/doc/">API documentation</a>.</p>

<h1>Benchmarks</h1>

<p>Generated with</p>

<pre><code>PROG=$program make bench
</code></pre>

<p>This converts the input files from the original markdown test suite concatenated together 25 times.</p>

<pre><code>     0.04s   sundown
     0.15s   discount
-&gt;   0.56s   lunamark + luajit
     0.80s   peg-markdown
-&gt;   0.97s   lunamark
     4.05s   PHP Markdown
     6.11s   pandoc
   113.13s   Markdown.pl
  2322.33s   markdown.lua
</code></pre>

<h1>Installing</h1>

<p>If you want a standalone version of lunamark that doesn’t depend on lua or other lua modules being installed on your system, just do</p>

<pre><code>make standalone
</code></pre>

<p>Your executable will be created in the <code>standalone</code> directory.</p>

<p>If you are a lua user, you will probably prefer to install lunamark using luarocks. You can install the latest development version this way:</p>

<pre><code>git clone http://github.com/jgm/lunamark.git
cd lunamark
luarocks make
</code></pre>

<p>Released versions will be uploaded to the luarocks repository, so you should be able to install them using:</p>

<pre><code>luarocks install lunamark
</code></pre>

<p>There may be a short delay between the release and the luarocks upload.</p>

<h1>Using the library</h1>

<p>Simple usage example:</p>

<pre><code>local lunamark = require(&quot;lunamark&quot;)
local opts = { }
local writer = lunamark.writer.html.new(opts)
local parse = lunamark.reader.markdown.new(writer, opts)
print(parse(&quot;Here&#39;s my *text*&quot;))
</code></pre>

<p>For more examples, see <a href="http://jgm.github.com/lunamark/doc/">API documentation</a>.</p>

<h1>lunamark</h1>

<p>The <code>lunamark</code> executable allows easy markdown conversion from the command line. For usage instructions, see the <a href="http://jgm.github.com/lunamark/lunamark.1.html">lunamark(1)</a> man page.</p>

<h1>lunadoc</h1>

<p>Lunamark comes with a simple lua library documentation tool, <code>lunadoc</code>. For usage instructions, see the <a href="http://jgm.github.com/lunamark/lunadoc.1.html">lunadoc(1)</a> man page. <code>lunadoc</code> reads source files and parses specially marked markdown comment blocks. <a href="http://jgm.github.com/lunamark/doc/">Here</a> is an example of the result.</p>

<h1>Tests</h1>

<p>The source directory contains a large test suite in <code>tests</code>. This includes existing Markdown and PHP Markdown tests, plus more tests for lunamark-specific features and additional corner cases.</p>

<p>To run the tests, use <code>bin/shtest</code>.</p>

<pre><code>bin/shtest --help            # get usage
bin/shtest                   # run all tests
bin/shtest indent            # run all tests matching &quot;indent&quot;
bin/shtest -p Markdown.pl -t # run all tests using Markdown.pl, and normalize using &#39;tidy&#39;
</code></pre>

<p>Lunamark currently fails four of the PHP Markdown tests:</p>

<ul>
<li><p><code>tests/PHP_Markdown/Quotes in attributes.test</code>: The HTML is semantically equivalent; using the <code>-t/--tidy</code> option to <code>bin/shtest</code> makes the test pass.</p></li>
<li><p><code>tests/PHP_Markdown/Email auto links.test</code>: The HTML is semantically equivalent. PHP markdown does entity obfuscation, and lunamark does not. This feature could be added easily enough, but the test would still fail, because the obfuscation involves randomness. Again, using the <code>-t/--tidy</code> option makes the test pass.</p></li>
<li><p><code>tests/PHP_Markdown/Ins &amp; del.test</code>: PHP markdown puts extra <code>&lt;p&gt;</code> tags around <code>&lt;ins&gt;hello&lt;/ins&gt;</code>, while lunamark does not. It’s hard to tell from the markdown spec which behavior is correct.</p></li>
<li><p><code>tests/PHP_Markdown/Emphasis.test</code>: A bunch of corner cases with nested strong and emphasized text. These corner cases are left undecided by the markdown spec, so in my view the PHP test suite is not normative here; I think lunamark’s behavior is perfectly reasonable, and I see no reason to change.</p></li>
</ul>

<h1>Authors</h1>

<p>lunamark is released under the MIT license.</p>

<p>Most of the library is written by John MacFarlane. Hans Hagen made some major performance improvements. Khaled Hosny added the original ConTeXt writer.</p>

<p>The <a href="http://paulrouget.com/dzslides/">dzslides</a> HTML, CSS, and javascript code is by Paul Rouget, released under the DWTFYWT Public License.</p>
<footer>

</footer>
</body>
</html>
